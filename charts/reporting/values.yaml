image:
  repository: ghcr.io/kubiquest/reporting
  tag: "latest"
  pullPolicy: Always

imagePullSecrets:
  - name: registry-secret

nameOverride: ""
fullnameOverride: ""

environment: production

# Cron schedule: every day at midnight UTC
schedule: "0 0 * * *"

# Environment variables (non-sensitive)
env:
  DB_HOST: mysql.databases.svc.cluster.local
  DB_PORT: "3306"
  DB_NAME: kubiquest

# Secrets injected via envFrom
existingSecrets:
  - mysql-secret
  - msteams-secret

resources:
  requests:
    memory: 64Mi
    cpu: 50m
  limits:
    memory: 128Mi
    cpu: 100m

# Keep last 3 successful jobs and 1 failed job
successfulJobsHistoryLimit: 3
failedJobsHistoryLimit: 1

# Never run two jobs at the same time
concurrencyPolicy: Forbid

# Restart on failure (not Never, to handle transient errors)
restartPolicy: OnFailure

podAnnotations: {}

podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534  # nobody

securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
